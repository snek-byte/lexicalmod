import {
  require_LexicalLink
} from "./chunk-X5NA4RYW.js";
import {
  require_LexicalUtils
} from "./chunk-IOJLRYLB.js";
import {
  require_LexicalComposerContext
} from "./chunk-OAE5LU5M.js";
import {
  require_react
} from "./chunk-KQPGYOHB.js";
import {
  require_Lexical
} from "./chunk-SYQEH4CE.js";
import {
  __commonJS
} from "./chunk-V4OQ3NZ2.js";

// node_modules/@lexical/react/LexicalLinkPlugin.dev.js
var require_LexicalLinkPlugin_dev = __commonJS({
  "node_modules/@lexical/react/LexicalLinkPlugin.dev.js"(exports) {
    "use strict";
    var link = require_LexicalLink();
    var LexicalComposerContext = require_LexicalComposerContext();
    var utils = require_LexicalUtils();
    var lexical = require_Lexical();
    var react = require_react();
    function LinkPlugin({
      validateUrl
    }) {
      const [editor] = LexicalComposerContext.useLexicalComposerContext();
      react.useEffect(() => {
        if (!editor.hasNodes([link.LinkNode])) {
          throw new Error("LinkPlugin: LinkNode not registered on editor");
        }
        return utils.mergeRegister(editor.registerCommand(link.TOGGLE_LINK_COMMAND, (payload) => {
          if (payload === null) {
            link.toggleLink(payload);
            return true;
          } else if (typeof payload === "string") {
            if (validateUrl === void 0 || validateUrl(payload)) {
              link.toggleLink(payload);
              return true;
            }
            return false;
          } else {
            const {
              url,
              target,
              rel,
              title
            } = payload;
            link.toggleLink(url, {
              rel,
              target,
              title
            });
            return true;
          }
        }, lexical.COMMAND_PRIORITY_LOW), validateUrl !== void 0 ? editor.registerCommand(lexical.PASTE_COMMAND, (event) => {
          const selection = lexical.$getSelection();
          if (!lexical.$isRangeSelection(selection) || selection.isCollapsed() || !(event instanceof ClipboardEvent) || event.clipboardData == null) {
            return false;
          }
          const clipboardText = event.clipboardData.getData("text");
          if (!validateUrl(clipboardText)) {
            return false;
          }
          if (!selection.getNodes().some((node) => lexical.$isElementNode(node))) {
            editor.dispatchCommand(link.TOGGLE_LINK_COMMAND, clipboardText);
            event.preventDefault();
            return true;
          }
          return false;
        }, lexical.COMMAND_PRIORITY_LOW) : () => {
        });
      }, [editor, validateUrl]);
      return null;
    }
    exports.LinkPlugin = LinkPlugin;
  }
});

// node_modules/@lexical/react/LexicalLinkPlugin.js
var require_LexicalLinkPlugin = __commonJS({
  "node_modules/@lexical/react/LexicalLinkPlugin.js"(exports, module) {
    var LexicalLinkPlugin = true ? require_LexicalLinkPlugin_dev() : null;
    module.exports = LexicalLinkPlugin;
  }
});
export default require_LexicalLinkPlugin();
//# sourceMappingURL=@lexical_react_LexicalLinkPlugin.js.map
